<style>
    body{
        height: auto;
    }
</style>
<div ng-controller="addSubCategoryCtrl" ng-cloak ng-init="init(2)">
<!-- *** HEADER *** -->
<div header></div>
    
<div id="mainDiv " class="container mainContainer">

    <div class="headingTitle">
        Sub-Category
    </div>

    <div class="row">

        <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
            <div id="addSubCategory" class="well wellClass">
                <div class="titleHeading">Add Sub-Category</div>
                <form name="myForm">
                <div class="containerBody">
                    <div class="padding-bottom15">
                        <input type="text" ng-model="subCategoryName" placeholder="Enter Sub Category Name" size="50" name="subCategoryName"
                               class="form-control textBox" ng-minlength="5" ng-maxlength="20" ng-pattern="/[A-z0-9-]$/" required>
                    <span style="color:red;" ng-show="
                           myForm.subCategoryName.$error.pattern || myForm.subCategoryName.$error.minlength || myForm.subCategoryName.$error.maxlength">Use Appropriate Sub Category Name</span>

                    </div>
                    <!--<div class="padding-bottom15">

                        <input type="text" ng-model="weight" placeholder="Enter Weightage" size="50"
                               class="form-control textBox" only-digits maxlength="3"/>
                    </div>-->
                    <div class="padding-bottom15">
                        <a href="" uib-tooltip="Click to Select SubCatagory" tooltip-placement="right">
                            <div class="inner-addon right-addon disabledBox" ng-click="selectCategoryPopup(2)">
                                <i class="glyphicon glyphicon-search"></i>

                                <input type="text" ng-model="selectedCategory.name" placeholder="Select Category" size="50"
                                                      class="form-control textBox" disabled>
                        
                            </div>
                        </a>
                        <!--<span class="popoverTool" ng-click="selectCategoryPopup()">
                            <a href="" data-toggle="popover" data-trigger="hover" data-content="Click to Search and Select Assessment Area">
                                <label>
                                    <span class="disabledBox">
                                        <input type="text" ng-model="selectedCategory" placeholder="Select Category" size="50"
                                               class="form-control textBox inputWidth width-100per" disabled>
                                        <span class="input-group-btn searchFont">
                                            <span class=" glyphicon glyphicon-search searchAssessmentArea"></span>
                                        </span>
                                    </span>
                                </label>
                            </a>
                        </span>-->
                    </div>
                    <div class="text-right">
                        <button ng-click="addSubCategory(2)" class="addBtn btn" ng-disabled="myForm.$invalid">Add</button>
                    </div>
                </div>
                    </form>
            </div>
        </div>

        <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12">
            <div id="subCategoryList" class="well wellClass">
                <div class="titleHeading">Sub-Category List</div>
                <div class="containerBody">
                    <div class="searchBox">
                        <div class="inner-addon right-addon">
                            <i class="glyphicon glyphicon-search"></i>
                            <input type="text" class="form-control textBox" ng-model="searchSubCategory"
                                   placeholder="Search Sub Category">
                        </div>
                    </div>
                   <!-- <div class="input-group searchBoxContainer">
                        <input type="text" class="form-control textBox" ng-model="searchSubCategory" placeholder="Search Sub-Category">
                         <span class="searchFont">
                            <span class="glyphicon glyphicon-search searchIcon"></span>
                         </span>

                    </div>-->
                    <div class="tblClass">
                        <table class="table table-bordered " cellspacing="0">
                            <tr class="blue-bg">
                                <th class="white bold text-center" width="40%">
                                    <a href="" ng-click="sortType = 'subCategoryName'; sortReverse = !sortReverse" class="white">
                                        Sub Category Name
                                        <span ng-show="sortType == 'subCategoryName' && !sortReverse" class="fa fa-caret-down white"></span>
                                        <span ng-show="sortType == 'subCategoryName' && sortReverse" class="fa fa-caret-up white"></span>
                                    </a>
                                </th>
                                <th class="white bold text-center" width="33%">
                                    <a href="" ng-click="sortType = 'categoryName'; sortReverse = !sortReverse" class="white">
                                        Category Name
                                        <span ng-show="sortType == 'categoryName' && !sortReverse" class="fa fa-caret-down white"></span>
                                        <span ng-show="sortType == 'categoryName' && sortReverse" class="fa fa-caret-up white"></span>
                                    </a>
                                </th>
                                <!--<th class="white bold text-center" width="33%">
                                    <a href="" ng-click="sortType = 'weightage'; sortReverse = !sortReverse" class="white">
                                        Weightage (in %)
                                        <span ng-show="sortType == 'weightage' && !sortReverse" class="fa fa-caret-down white"></span>
                                        <span ng-show="sortType == 'weightage' && sortReverse" class="fa fa-caret-up white"></span>
                                    </a>
                                </th>-->
                                <th class="white bold text-center">
                                    Edit
                                </th>
                                <th class="white bold text-center">
                                    Deactivate
                                </th>
                            </tr>
                            <tr dir-paginate="subCategory in subCategoryList | filter : searchSubCategory | itemsPerPage:5 | orderBy:sortType:sortReverse" pagination-id="subCategory">
                                <td class="text-center">
                                    <span class="">
                                        {{subCategory.subCategoryName}}
                                    </span>
                                </td>
                                <td class="text-center">
                                    <span class="">
                                        {{subCategory.categoryName}}
                                    </span>
                                </td>
                                <!--<td class="text-center">
                                    <span class="">
                                        {{subCategory.weightage}}
                                    </span>
                                </td>-->
                                <td class="text-center">
                                    <span>
                                        <a class="a-toggle bold" ng-click="subCategory.active == false || editCategoryDialog.open(subCategory,subCategoryList,subCategory.weightage,subCategory.subCategoryName,subCategory.category,categories,2)"uib-tooltip="Click to Edit" tooltip-placement="right">
                                            <span class="glyphicon glyphicon-pencil" ng-class="{'deactivateRed' : subCategory.active==false}"></span>
                                        </a>
                                    </span>
                                </td>
                                <td class="text-center">
                                    <a class="a-toggle bold" ng-click="deleteSubCategory(subCategory,2)" uib-tooltip="Click to Deactivate" tooltip-placement="right">
                                        <span class="glyphicon glyphicon-ban-circle" ng-class="{'deactivateRed' : subCategory.active==false}"></span>
                                    </a>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="text-center">
                        <dir-pagination-controls max-size="5" direction-links="true" boundary-links="true"  pagination-id="subCategory"></dir-pagination-controls>
                    </div>
                </div>
            </div>
        </div>

    </div>
    </div>    
    <!-- *** EDIT Modal Popup *** --> 
     <edit-sub-category-dialog model="editCategoryDialog"></edit-sub-category-dialog>
    
        <!-- *** Delete Modal Popup *** --> 
      <div ng-include="'./views/deleteModalPopup.html'"></div>

    <!-- MODAL POPUP for SELECT Category -->
    <div class="modal fade" id="categoryModal" tabindex="-1" role="dialog" aria-hidden="true">
        <div  class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <span class="modal-title headingModalTitle">Select Category</span>
                </div>
                <div class="modal-body">
                    <div class="row" dir-paginate="x in categories | filter:x |itemsPerPage:5"  pagination-id="Category">
                        <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2 text-right">
                            <input type="radio" ng-model="$parent.currentCategory" value="{{x.categoryId}}">
                        </div>
                        <div class="col-lg-10 col-md-10 col-sm-10 col-xs-10">
                            <label class="modalPopUp1TdStyle font-size16 width-100per">{{x.categoryName}}</label>
                        </div>
                    </div>
                    <div class="text-center">
                        <dir-pagination-controls max-size="5" direction-links="true" boundary-links="true"  pagination-id="Category"></dir-pagination-controls>
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                            <button ng-click="showSelectedCategory(currentCategory)" class="addBtnModal" data-dismiss="modal">
                                Apply
                            </button>
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                            <button type="button" class="addBtnModal" data-dismiss="modal">Cancel</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- ERROR MODAL -->
    <div class="modal fade" id="errorModal" tabindex="-1" role="dialog" aria-hidden="true">
        <div  class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <span class="modal-title headingModalTitle">Error</span>
                </div>
                <div class="modal-body">
                    <div>
                        Total Weightage is greater than 100%. Please check and re-enter the value!
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="text-center">
                        <button type="button" class="addBtnModal width40" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
<!-- *** FOOTER *** -->
<div footer></div>
</div>